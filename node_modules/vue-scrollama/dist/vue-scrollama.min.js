var VueScrollama=function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var o=t.indexOf("Edge/");return o>0?parseInt(t.substring(o+5,t.indexOf(".",o)),10):-1}function n(){n.init||(n.init=!0,a=-1!==e())}function o(t){t.component("resize-observer",c),t.component("ResizeObserver",c)}function i(t,e,n,o,i,r,s,a,c,f){"boolean"!=typeof s&&(c=a,a=s,s=!1);var l="function"==typeof n?n.options:n;t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),o&&(l._scopeId=o);var u;if(r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=u):e&&(u=s?function(){e.call(this,f(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(l.functional){var d=l.render;l.render=function(t,e){return u.call(e),d(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return n}function r(t){r.installed||(r.installed=!0,t.component("Scrollama",v))}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var s=t(function(t,e){!function(e,n){t.exports=function(){function t(t){for(var e=t.length,n=[],o=0;o<e;o+=1)n.push(t[o]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(e,n){return void 0===n&&(n=document),"string"==typeof e?t(n.querySelectorAll(e)):e instanceof Element?t([e]):e instanceof NodeList?t(e):e instanceof Array?e:[]}function o(t){return"scrollama__debug-step--"+t.id+"-"+t.i}function i(t){return"scrollama__debug-offset--"+t.id}function r(t){var e=t.id,n=t.offsetVal,o=t.stepClass,r=document.createElement("div");r.setAttribute("id",i({id:e})),r.setAttribute("class","scrollama__debug-offset"),r.style.position="fixed",r.style.left="0",r.style.width="100%",r.style.height="0px",r.style.borderTop="2px dashed black",r.style.zIndex="9999";var s=document.createElement("p");s.innerText='".'+o+'" trigger: '+n,s.style.fontSize="12px",s.style.fontFamily="monospace",s.style.color="black",s.style.margin="0",s.style.padding="6px",r.appendChild(s),document.body.appendChild(r)}function s(t){r({id:t.id,offsetVal:t.offsetVal,stepClass:t.stepEl[0].getAttribute("class")})}function a(t){var e=t.id,n=t.offsetMargin,o=(t.offsetVal,i({id:e}));document.querySelector("#"+o).style.top=n+"px"}function c(t){var e=t.id,n=(t.stepOffsetHeight,t.offsetMargin);t.offsetVal;a({id:e,offsetMargin:n})}function f(t){var e=t.id,n=t.index,i=t.state,r=o({id:e,i:n}),s=document.querySelector("#"+r+"_above"),a=document.querySelector("#"+r+"_below"),c="enter"===i?"block":"none";s&&(s.style.display=c),a&&(a.style.display=c)}function l(){function t(){var t="abcdefghijklmnopqrstuv",e=t.length,n=(new Date).getTime();return""+[0,0,0].map(function(n){return t[Math.floor(Math.random()*e)]}).join("")+n}function o(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function i(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}function r(t){return+t.getAttribute("data-scrollama-index")}function a(){window.pageYOffset>st?at="down":window.pageYOffset<st&&(at="up"),st=window.pageYOffset}function l(){D=window.innerHeight,X=i(),J=F?F.getBoundingClientRect():null,q=Y*D,U=N?N.map(function(t){return t.offsetHeight}):[],G=N?N.map(o):[],Q&&K&&A(),Z&&c({id:W,stepOffsetHeight:U,offsetMargin:q,offsetVal:Y})}function u(t){t&&!Q?(K&&A(),Q=!0):t||(V.top&&V.top.disconnect(),V.bottom&&V.bottom.disconnect(),V.stepAbove&&V.stepAbove.forEach(function(t){return t.disconnect()}),V.stepBelow&&V.stepBelow.forEach(function(t){return t.disconnect()}),V.stepProgress&&V.stepProgress.forEach(function(t){return t.disconnect()}),V.viewportAbove&&V.viewportAbove.forEach(function(t){return t.disconnect()}),V.viewportBelow&&V.viewportBelow.forEach(function(t){return t.disconnect()}),Q=!1)}function d(t){for(var e=Math.ceil(t/et),n=[],o=1/e,i=0;i<e;i++)n.push(i*o);return n}function p(t,e){if("above"===e)for(var n=0;n<t;n++){var o=it[n];"enter"===o.state&&g(N[n],"down"),"up"===o.direction&&(h(N[n],"down",!1),g(N[n],"down"))}else if("below"===e)for(var i=it.length-1;i>t;i--){var r=it[i];"enter"===r.state&&g(N[i],"up"),"down"===r.direction&&(h(N[i],"up",!1),g(N[i],"up"))}}function h(t,e,n){void 0===n&&(n=!0);var o=r(t),i={element:t,index:o,direction:e};it[o].direction=e,it[o].state="enter",nt&&n&&"down"===e&&p(o,"above"),nt&&n&&"up"===e&&p(o,"below"),B.stepEnter&&"function"==typeof B.stepEnter&&!ct[o]&&(B.stepEnter(i,it),Z&&f({id:W,index:o,state:"enter"}),ot&&(ct[o]=!0)),tt&&("down"===e?v(t,0):v(t,1))}function g(t,e){var n=r(t),o={element:t,index:n,direction:e};it[n].direction=e,it[n].state="exit",tt&&("down"===e?v(t,1):v(t,0)),B.stepExit&&"function"==typeof B.stepExit&&(B.stepExit(o,it),Z&&f({id:W,index:n,state:"exit"}))}function v(t,e){var n={element:t,index:r(t),progress:e};B.stepProgress&&"function"==typeof B.stepProgress&&B.stepProgress(n)}function m(){var t={direction:at};rt.direction=at,rt.state="enter",B.containerEnter&&"function"==typeof B.containerEnter&&B.containerEnter(t)}function b(){var t={direction:at};rt.direction=at,rt.state="exit",B.containerExit&&"function"==typeof B.containerExit&&B.containerExit(t)}function _(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.boundingClientRect,o=t.target,i=n.bottom,s=n.height,a=i-q,c=r(o),f=it[c];a>=-I&&(e&&"down"===at&&"enter"!==f.state?h(o,at):e||"up"!==at||"enter"!==f.state?!e&&a>=s&&"down"===at&&"enter"===f.state&&g(o,at):g(o,at))})}function y(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.boundingClientRect,o=t.target,i=n.bottom,s=n.height,a=i-q,c=r(o),f=it[c];a>=-I&&a<s&&e&&"up"===at&&"enter"!==f.state?h(o,at):a<=I&&!e&&"down"===at&&"enter"===f.state&&g(o,at)})}function w(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,o=r(n),i=it[o];e&&"down"===at&&"enter"!==i.state&&"down"!==i.direction&&(h(n,"down"),g(n,"down"))})}function x(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,o=r(n),i=it[o];e&&"up"===at&&"enter"!==i.state&&"up"!==i.direction&&(h(n,"up"),g(n,"up"))})}function E(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.intersectionRatio,o=t.boundingClientRect,i=t.target,r=o.bottom-q;e&&r>=-I&&v(i,+n.toFixed(3))})}function O(t){a();var e=t[0],n=e.isIntersecting,o=e.boundingClientRect;o.top;o.bottom>-I&&(n?m(at):"enter"===rt.state&&b(at))}function T(t){a();var e=t[0],n=e.isIntersecting;e.boundingClientRect.top<I&&(n?m(at):"enter"===rt.state&&b(at))}function C(){V.top&&V.top.unobserve(j);var t={root:null,rootMargin:D+"px 0px -"+D+"px 0px",threshold:0};V.top=new IntersectionObserver(O,t),V.top.observe(j)}function R(){V.bottom&&V.bottom.unobserve(j);var t={root:null,rootMargin:"-"+J.height+"px 0px "+J.height+"px 0px",threshold:0};V.bottom=new IntersectionObserver(T,t),V.bottom.observe(j)}function k(){V.stepAbove&&V.stepAbove.forEach(function(t){return t.disconnect()}),V.stepAbove=N.map(function(t,e){var n={root:null,rootMargin:U[e]+"px 0px "+(-D+q)+"px 0px",threshold:0},o=new IntersectionObserver(_,n);return o.observe(t),o})}function S(){V.stepBelow&&V.stepBelow.forEach(function(t){return t.disconnect()}),V.stepBelow=N.map(function(t,e){var n={root:null,rootMargin:-q+"px 0px "+(X-D+U[e]+q)+"px 0px",threshold:0},o=new IntersectionObserver(y,n);return o.observe(t),o})}function M(){V.viewportAbove&&V.viewportAbove.forEach(function(t){return t.disconnect()}),V.viewportAbove=N.map(function(t,e){var n={root:null,rootMargin:G[e]+"px 0px "+-(D-q+U[e])+"px 0px",threshold:0},o=new IntersectionObserver(w,n);return o.observe(t),o})}function H(){V.viewportBelow&&V.viewportBelow.forEach(function(t){return t.disconnect()}),V.viewportBelow=N.map(function(t,e){var n={root:null,rootMargin:-(q+U[e])+"px 0px "+(X-G[e]-U[e]-q)+"px 0px",threshold:0},o=new IntersectionObserver(x,n);return o.observe(t),o})}function $(){V.stepProgress&&V.stepProgress.forEach(function(t){return t.disconnect()}),V.stepProgress=N.map(function(t,e){var n={root:null,rootMargin:U[e]-q+"px 0px "+(-D+q)+"px 0px",threshold:d(U[e])},o=new IntersectionObserver(E,n);return o.observe(t),o})}function A(){M(),H(),k(),S(),tt&&$(),j&&F&&(C(),R())}function z(){N.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)})}function P(){it=N.map(function(){return{direction:null,state:null}}),rt={direction:null,state:null}}function L(){Z&&s({id:W,stepEl:N,offsetVal:Y})}var I=1,B={},V={},j=null,F=null,N=null,W=null,Y=0,q=0,D=0,X=0,U=null,G=null,J=null,K=!1,Q=!1,Z=!1,tt=!1,et=0,nt=!1,ot=!1,it=null,rt=null,st=-1,at=null,ct=[],ft={};return ft.setup=function(o){var i=o.container,r=o.graphic,s=o.step,a=o.offset;void 0===a&&(a=.5);var c=o.progress;void 0===c&&(c=!1);var f=o.threshold;void 0===f&&(f=4);var d=o.debug;void 0===d&&(d=!1);var p=o.order;void 0===p&&(p=!0);var h=o.once;return void 0===h&&(h=!1),W=t(),N=n(s),j=i?e(i):null,F=r?e(r):null,N.length?(Z=d,tt=c,nt=p,ot=h,ft.offsetTrigger(a),et=Math.max(1,+f),K=!0,L(),z(),P(),l(),u(!0),ft):(console.error("scrollama error: no step elements"),ft)},ft.resize=function(){return l(),ft},ft.enable=function(){return u(!0),ft},ft.disable=function(){return u(!1),ft},ft.destroy=function(){u(!1),Object.keys(B).forEach(function(t){return B[t]=null}),Object.keys(V).forEach(function(t){return V[t]=null})},ft.offsetTrigger=function(t){return t&&!isNaN(t)?(Y=Math.min(Math.max(0,t),1),ft):Y},ft.onStepEnter=function(t){return B.stepEnter=t,ft},ft.onStepExit=function(t){return B.stepExit=t,ft},ft.onStepProgress=function(t){return B.stepProgress=t,ft},ft.onContainerEnter=function(t){return B.containerEnter=t,ft},ft.onContainerExit=function(t){return B.containerExit=t,ft},ft}return l}()}()}),a=void 0,c={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{compareAndNotify:function(){this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify"))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!a&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),delete this._resizeObject.onload)}},mounted:function(){var t=this;n(),this.$nextTick(function(){t._w=t.$el.offsetWidth,t._h=t.$el.offsetHeight});var e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",a&&this.$el.appendChild(e),e.data="about:blank",a||this.$el.appendChild(e)},beforeDestroy:function(){this.removeResizeHandlers()}},f={version:"0.4.5",install:o},l=null;"undefined"!=typeof window?l=window.Vue:"undefined"!=typeof global&&(l=global.Vue),l&&l.use(f);var u=t(function(t){!function(e,n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function r(t){return parseFloat(t)||0}function s(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function a(){function t(){e.pageXOffset!=p.left?(p.top=e.pageYOffset,p.left=e.pageXOffset,v.refreshAll()):e.pageYOffset!=p.top&&(p.top=e.pageYOffset,p.left=e.pageXOffset,h.forEach(function(t){return t._recalcPosition()}))}function o(){r=setInterval(function(){h.forEach(function(t){return t._fastCheck()})},500)}function i(){clearInterval(r)}if(!u){u=!0,t(),e.addEventListener("scroll",t),e.addEventListener("resize",v.refreshAll),e.addEventListener("orientationchange",v.refreshAll);var r=void 0,s=void 0,a=void 0;"hidden"in n?(s="hidden",a="visibilitychange"):"webkitHidden"in n&&(s="webkitHidden",a="webkitvisibilitychange"),a?(n[s]||o(),n.addEventListener(a,function(){n[s]?i():o()})):o()}}var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),f=!1,l=void 0!==e;l&&e.getComputedStyle?function(){var t=n.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(e){try{t.style.position=e+"sticky"}catch(t){}return""!=t.style.position})&&(f=!0)}():f=!0;var u=!1,d="undefined"!=typeof ShadowRoot,p={top:null,left:null},h=[],g=function(){function t(e){if(o(this,t),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(h.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,h.push(this),this.refresh()}return c(t,[{key:"refresh",value:function(){if(!f&&!this._removed){this._active&&this._deactivate();var t=this._node,o=getComputedStyle(t),a={position:o.position,top:o.top,display:o.display,marginTop:o.marginTop,marginBottom:o.marginBottom,marginLeft:o.marginLeft,marginRight:o.marginRight,cssFloat:o.cssFloat};if(!isNaN(parseFloat(a.top))&&"table-cell"!=a.display&&"none"!=a.display){this._active=!0;var c=t.style.position;"sticky"!=o.position&&"-webkit-sticky"!=o.position||(t.style.position="static");var l=t.parentNode,u=d&&l instanceof ShadowRoot?l.host:l,p=t.getBoundingClientRect(),h=u.getBoundingClientRect(),g=getComputedStyle(u);this._parent={node:u,styles:{position:u.style.position},offsetHeight:u.offsetHeight},this._offsetToWindow={left:p.left,right:n.documentElement.clientWidth-p.right},this._offsetToParent={top:p.top-h.top-r(g.borderTopWidth),left:p.left-h.left-r(g.borderLeftWidth),right:-p.right+h.right-r(g.borderRightWidth)},this._styles={position:c,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight};var v=r(a.top);this._limits={start:p.top+e.pageYOffset-v,end:h.top+e.pageYOffset+u.offsetHeight-r(g.borderBottomWidth)-t.offsetHeight-v-r(a.marginBottom)};var m=g.position;"absolute"!=m&&"relative"!=m&&(u.style.position="relative"),this._recalcPosition();var b=this._clone={};b.node=n.createElement("div"),i(b.node.style,{width:p.right-p.left+"px",height:p.bottom-p.top+"px",marginTop:a.marginTop,marginBottom:a.marginBottom,marginLeft:a.marginLeft,marginRight:a.marginRight,cssFloat:a.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),l.insertBefore(b.node,t),b.docOffsetTop=s(b.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=p.top<=this._limits.start?"start":p.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":i(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":i(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":i(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(s(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,i(this._node.style,this._styles),delete this._styles,h.some(function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node})||i(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var t=this;this._deactivate(),h.some(function(e,n){if(e._node===t._node)return h.splice(n,1),!0}),this._removed=!0}}]),t}(),v={stickies:h,Sticky:g,forceSticky:function(){f=!1,a(),this.refreshAll()},addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<h.length;e++)if(h[e]._node===t)return h[e];return new g(t)},add:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length){for(var e=[],n=0;n<t.length;n++){(function(n){var o=t[n];o instanceof HTMLElement?h.some(function(t){if(t._node===o)return e.push(t),!0})||e.push(new g(o)):e.push(void 0)})(n)}return e}},refreshAll:function(){h.forEach(function(t){return t.refresh()})},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}h.some(function(e){if(e._node===t)return e.remove(),!0})},remove:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length)for(var e=0;e<t.length;e++)!function(e){var n=t[e];h.some(function(t){if(t._node===n)return t.remove(),!0})}(e)},removeAll:function(){for(;h.length;)h[0].remove()}};f||a(),t.exports?t.exports=v:l&&(e.Stickyfill=v)}(window,document)}),d=i,p={name:"Scrollama",components:{ResizeObserver:c},props:{id:{type:String,validator:function(t){return!/\s/.test(t)},default:function(){return Math.random().toString(36).substr(2,9)}}},mounted:function(){u.add(this.$refs["scrollama-graphic"]),this.scroller=s(),this.setup()},beforeDestroy:function(){this.scroller.destroy()},computed:{opts:function(){return Object.assign({},this.$attrs,{step:"#scrollama-steps-"+this.id+">div",container:"#scrollama-container-"+this.id,graphic:"#scrollama-graphic-"+this.id})}},methods:{setup:function(){var t=this;this.scroller.destroy(),this.scroller.setup(this.opts),this.$listeners["step-progress"]&&this.scroller.onStepProgress(function(e){t.$emit("step-progress",e)}),this.$listeners["step-enter"]&&this.scroller.onStepEnter(function(e){t.$emit("step-enter",e)}),this.$listeners["step-exit"]&&this.scroller.onStepExit(function(e){t.$emit("step-exit",e)}),this.$listeners["container-enter"]&&this.scroller.onContainerEnter(function(e){t.$emit("container-enter",e)}),this.$listeners["container-exit"]&&this.scroller.onContainerExit(function(e){t.$emit("container-exit",e)}),this.scroller.resize()},handleResize:function(){this.scroller.resize()}}},h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scrollama-container",class:{"with-graphic":t.$slots.graphic},attrs:{id:"scrollama-container-"+t.id}},[n("div",{ref:"scrollama-graphic",staticClass:"scrollama-graphic",attrs:{id:"scrollama-graphic-"+t.id}},[t._t("graphic")],2),t._v(" "),n("div",{staticClass:"scrollama-steps",attrs:{id:"scrollama-steps-"+t.id}},[t._t("default")],2),t._v(" "),n("resize-observer",{on:{notify:t.handleResize}})],1)},g=[];h._withStripped=!0;var v=d({render:h,staticRenderFns:g},void 0,p,void 0,!1,void 0,void 0,void 0),m={install:r},b=null;return"undefined"!=typeof window?b=window.Vue:"undefined"!=typeof global&&(b=global.Vue),b&&b.use(m),v}();
